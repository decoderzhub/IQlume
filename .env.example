# ==============================================================================
# brokernomex Backend Environment Configuration (Template - No Secrets)
# ==============================================================================

# ------------------------------------------------------------------------------
# Supabase Configuration
# ------------------------------------------------------------------------------
SUPABASE_URL=https://<your-supabase-project>.supabase.co
SUPABASE_KEY=<your-supabase-anon-key>
SUPABASE_SERVICE_ROLE_KEY=<your-supabase-service-role-key>
SUPABASE_JWT_SECRET=<your-supabase-jwt-secret>

# ------------------------------------------------------------------------------
# Alpaca API Configuration (System-level for market data)
# ------------------------------------------------------------------------------
ALPACA_API_KEY=<your-alpaca-api-key>
ALPACA_SECRET_KEY=<your-alpaca-secret-key>
ALPACA_BASE_URL=https://paper-api.alpaca.markets/v2

# ------------------------------------------------------------------------------
# Alpaca Broker Configuration (for user account linking via OAuth)
# ------------------------------------------------------------------------------
ALPACA_CLIENT_ID=<your-alpaca-client-id>
ALPACA_CLIENT_SECRET=<your-alpaca-client-secret>
ALPACA_OAUTH_REDIRECT_URI=https://api.handler.brokernomex.com/api/alpaca/oauth/callback

# ------------------------------------------------------------------------------
# Alpaca Broker API (for managed broker accounts)
# ------------------------------------------------------------------------------
ALPACA_BROKER_API_KEY=<your-alpaca-broker-api-key>
ALPACA_BROKER_SECRET_KEY=<your-alpaca-broker-secret-key>
ALPACA_BROKER_BASE_URL=https://broker-api.sandbox.alpaca.markets
# Use https://api.alpaca.markets for live trading

# ------------------------------------------------------------------------------
# Frontend Configuration
# ------------------------------------------------------------------------------
FRONTEND_URL=https://brokernomex.com

# ------------------------------------------------------------------------------
# Background Service Intervals (seconds)
# ------------------------------------------------------------------------------
ORDER_FILL_CHECK_INTERVAL=120
TRADE_SYNC_INTERVAL=180
GRID_MONITOR_INTERVAL=180
EXIT_MONITOR_INTERVAL=90
IDLE_SLEEP_DURATION=300

# ------------------------------------------------------------------------------
# Service Control Flags
# ------------------------------------------------------------------------------
DISABLE_BACKGROUND_SERVICES=false
ENABLE_ORDER_FILL_MONITOR=true
ENABLE_TRADE_SYNC=true
ENABLE_GRID_MONITOR=true
ENABLE_EXIT_MONITOR=true
ENABLE_TRADING_SCHEDULER=true

# ------------------------------------------------------------------------------
# Database Query Optimization
# ------------------------------------------------------------------------------
MAX_QUERY_DAYS_BACK=7
MAX_QUERY_RESULTS=100

# ------------------------------------------------------------------------------
# Error Handling and Circuit Breakers
# ------------------------------------------------------------------------------
ERROR_THRESHOLD_WARNING=3
ERROR_THRESHOLD_PAUSE=5
ERROR_PAUSE_DURATION=300

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
LOG_LEVEL=INFO

# ------------------------------------------------------------------------------
# External Integrations
# ------------------------------------------------------------------------------
# Anthropic (AI features)
ANTHROPIC_API_KEY=<your-anthropic-api-key>

# Stripe (Payments)
STRIPE_SECRET_KEY=<your-stripe-secret-key>
STRIPE_PUBLISHABLE_KEY=<your-stripe-publishable-key>

# Plaid (Bank linking)
PLAID_CLIENT_ID=<your-plaid-client-id>
PLAID_SECRET=<your-plaid-secret>
PLAID_ENV=sandbox
